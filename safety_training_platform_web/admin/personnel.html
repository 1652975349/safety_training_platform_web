<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>人员管理 - 安全培训平台</title>
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
<!-- 顶部通栏 - 直接嵌入 -->
<header class="header">
    <div class="header-left">
        <div class="logo">安全培训平台</div>
        <div class="role-switcher">
            <button class="role-btn" onclick="switchRole('student')">学员端</button>
            <button class="role-btn active" onclick="switchRole('admin')">管理员端</button>
        </div>
    </div>
    <div class="header-right">
        <div class="user-info">
            <div class="avatar">👤</div>
            <span id="currentUser">管理员</span>
        </div>
        <button class="btn btn-secondary" onclick="logout()">退出</button>
    </div>
</header>

<!-- 左侧菜单 - 直接嵌入 -->
<nav class="sidebar" id="sidebar">
    <ul class="sidebar-menu" id="sidebarMenu">
        <li class="menu-item">
            <a href="dashboard_simple.html" class="menu-link">
                <span class="menu-icon">🏠</span>
                <span class="menu-text">首页</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="personnel.html" class="menu-link active">
                <span class="menu-icon">👥</span>
                <span class="menu-text">人员管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="training.html" class="menu-link">
                <span class="menu-icon">📚</span>
                <span class="menu-text">培训管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="content.html" class="menu-link">
                <span class="menu-icon">📄</span>
                <span class="menu-text">内容管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="statistics.html" class="menu-link">
                <span class="menu-icon">📊</span>
                <span class="menu-text">统计分析</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="settings.html" class="menu-link">
                <span class="menu-icon">⚙️</span>
                <span class="menu-text">系统设置</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="notifications.html" class="menu-link">
                <span class="menu-icon">🔔</span>
                <span class="menu-text">通知管理</span>
            </a>
        </li>
    </ul>
</nav>
    
    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="page-title">人员管理</h1>
            <p class="page-subtitle">批量导入导出、快速扫码注册，分部门、分专业管理</p>
        </div>
        
        <!-- 操作工具栏 -->
        <div class="card">
            <div class="card-body">
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap; justify-content: space-between;">
                    <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="showImportModal()">📥 批量导入</button>
                        <button class="btn btn-success" onclick="exportPersonnel()">📤 批量导出</button>
                        <button class="btn btn-warning" onclick="showQRCodeModal()">📱 扫码注册</button>
                        <button class="btn btn-info" onclick="addPersonnel()">➕ 添加人员</button>
                    </div>
                    <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                        <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                            <select class="form-control">
                                <option value="">全部部门</option>
                                <option value="production">生产部</option>
                                <option value="technology">技术部</option>
                                <option value="safety">安全部</option>
                                <option value="maintenance">维修部</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                            <select class="form-control">
                                <option value="">全部专业</option>
                                <option value="electrical">电气专业</option>
                                <option value="mechanical">机械专业</option>
                                <option value="safety">安全专业</option>
                                <option value="chemical">化工专业</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 0; min-width: 200px;">
                            <input type="text" class="form-control" placeholder="搜索姓名/工号/身份证">
                        </div>
                        <button class="btn btn-secondary">🔍 搜索</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 人员统计 -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">👥</div>
                <div class="stat-number">1,256</div>
                <div class="stat-label">总人数</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">👨‍🔧</div>
                <div class="stat-number">856</div>
                <div class="stat-label">长维人员</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">👷</div>
                <div class="stat-number">400</div>
                <div class="stat-label">外委人员</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon red">📋</div>
                <div class="stat-number">12</div>
                <div class="stat-label">部门数量</div>
            </div>
        </div>
        
        <!-- 人员列表 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">人员列表</h2>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>
                                    <input type="checkbox" onchange="toggleSelectAll()">
                                </th>
                                <th>工号</th>
                                <th>姓名</th>
                                <th>身份证号</th>
                                <th>手机号</th>
                                <th>部门</th>
                                <th>专业</th>
                                <th>人员类型</th>
                                <th>注册时间</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><input type="checkbox" class="personnel-checkbox"></td>
                                <td>EMP001</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 30px; height: 30px; background: #e3f2fd; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px;">张</div>
                                        <strong>张三</strong>
                                    </div>
                                </td>
                                <td>320102199001011234</td>
                                <td>138****1234</td>
                                <td>生产部</td>
                                <td>电气专业</td>
                                <td><span class="badge badge-info">长维人员</span></td>
                                <td>2024-01-10</td>
                                <td><span class="badge badge-success">正常</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">编辑</button>
                                    <button class="btn btn-secondary btn-sm">详情</button>
                                    <button class="btn btn-danger btn-sm">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="personnel-checkbox"></td>
                                <td>EMP002</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 30px; height: 30px; background: #e8f5e8; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px;">李</div>
                                        <strong>李四</strong>
                                    </div>
                                </td>
                                <td>320102199002021234</td>
                                <td>139****5678</td>
                                <td>技术部</td>
                                <td>机械专业</td>
                                <td><span class="badge badge-info">长维人员</span></td>
                                <td>2024-01-11</td>
                                <td><span class="badge badge-success">正常</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">编辑</button>
                                    <button class="btn btn-secondary btn-sm">详情</button>
                                    <button class="btn btn-danger btn-sm">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="personnel-checkbox"></td>
                                <td>OUT001</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 30px; height: 30px; background: #fff3e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px;">王</div>
                                        <strong>王五</strong>
                                    </div>
                                </td>
                                <td>320102199003031234</td>
                                <td>137****9012</td>
                                <td>维修部</td>
                                <td>电气专业</td>
                                <td><span class="badge badge-warning">外委人员</span></td>
                                <td>2024-01-12</td>
                                <td><span class="badge badge-success">正常</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">编辑</button>
                                    <button class="btn btn-secondary btn-sm">详情</button>
                                    <button class="btn btn-danger btn-sm">删除</button>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" class="personnel-checkbox"></td>
                                <td>EMP003</td>
                                <td>
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div style="width: 30px; height: 30px; background: #fce4ec; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 12px;">赵</div>
                                        <strong>赵六</strong>
                                    </div>
                                </td>
                                <td>320102199004041234</td>
                                <td>136****3456</td>
                                <td>安全部</td>
                                <td>安全专业</td>
                                <td><span class="badge badge-info">长维人员</span></td>
                                <td>2024-01-13</td>
                                <td><span class="badge badge-warning">未激活</span></td>
                                <td>
                                    <button class="btn btn-primary btn-sm">编辑</button>
                                    <button class="btn btn-secondary btn-sm">详情</button>
                                    <button class="btn btn-success btn-sm">激活</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- 分页 -->
                <div style="display: flex; justify-content: between; align-items: center; margin-top: 20px;">
                    <div>
                        <span>显示 1-10 条，共 1,256 条记录</span>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn btn-secondary btn-sm">上一页</button>
                        <button class="btn btn-primary btn-sm">1</button>
                        <button class="btn btn-secondary btn-sm">2</button>
                        <button class="btn btn-secondary btn-sm">3</button>
                        <span>...</span>
                        <button class="btn btn-secondary btn-sm">126</button>
                        <button class="btn btn-secondary btn-sm">下一页</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 批量导入模态框 -->
        <div id="importModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 10px; padding: 30px; width: 90%; max-width: 500px;">
                <h3 style="margin-bottom: 20px;">批量导入人员</h3>
                <div class="form-group">
                    <label class="form-label">选择Excel文件</label>
                    <input type="file" class="form-control" accept=".xlsx,.xls">
                    <small class="text-muted">支持.xlsx和.xls格式，请按照模板格式填写</small>
                </div>
                <div class="form-group">
                    <label class="form-label">人员类型</label>
                    <select class="form-control">
                        <option value="longterm">长维人员</option>
                        <option value="outsource">外委人员</option>
                    </select>
                </div>
                <div style="display: flex; gap: 15px; justify-content: flex-end; margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="hideImportModal()">取消</button>
                    <button class="btn btn-primary">开始导入</button>
                </div>
            </div>
        </div>
        
        <!-- 扫码注册模态框 -->
        <div id="qrCodeModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 2000;">
            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 10px; padding: 30px; width: 90%; max-width: 400px; text-align: center;">
                <h3 style="margin-bottom: 20px;">扫码注册</h3>
                <div style="width: 200px; height: 200px; background: #f0f0f0; border: 2px dashed #ccc; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 48px;">
                    📱
                </div>
                <p style="color: #666; margin-bottom: 20px;">使用微信扫描二维码进行快速注册</p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-secondary" onclick="hideQRCodeModal()">关闭</button>
                    <button class="btn btn-primary">刷新二维码</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 全选/取消全选
        function toggleSelectAll() {
            const selectAll = document.querySelector('input[type="checkbox"]');
            const checkboxes = document.querySelectorAll('.personnel-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAll.checked;
            });
        }
        
        // 显示导入模态框
        function showImportModal() {
            document.getElementById('importModal').style.display = 'block';
        }
        
        // 隐藏导入模态框
        function hideImportModal() {
            document.getElementById('importModal').style.display = 'none';
        }
        
        // 显示扫码注册模态框
        function showQRCodeModal() {
            document.getElementById('qrCodeModal').style.display = 'block';
        }
        
        // 隐藏扫码注册模态框
        function hideQRCodeModal() {
            document.getElementById('qrCodeModal').style.display = 'none';
        }
        
        // 导出人员
        function exportPersonnel() {
            if (confirm('确定要导出所有人员信息吗？')) {
                alert('正在导出人员信息...');
            }
        }
        
        // 添加人员
        function addPersonnel() {
            alert('跳转到添加人员页面');
        }
        
        // 角色切换功能
        function switchRole(role) {
            // 移除所有active类
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 添加active类到当前按钮
            event.target.classList.add('active');
            
            // 根据角色跳转到对应页面
            if (role === 'student') {
                window.location.href = '../student/dashboard_simple.html';
            } else if (role === 'admin') {
                window.location.href = 'dashboard_simple.html';
            }
        }

        // 退出功能
        function logout() {
            if (confirm('确定要退出系统吗？')) {
                window.location.href = '../index.html';
            }
        }

        // 更新用户信息
        function updateUserInfo(username) {
            document.getElementById('currentUser').textContent = username;
        }
    </script>
</body>
</html>
