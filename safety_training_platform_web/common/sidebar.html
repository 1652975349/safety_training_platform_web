<!-- 左侧菜单组件 -->
<nav class="sidebar" id="sidebar">
    <ul class="sidebar-menu" id="sidebarMenu">
        <!-- 菜单项将通过JavaScript动态加载 -->
    </ul>
</nav>

<script>
// 菜单配置
const menuConfig = {
    student: [
        { icon: '🏠', text: '首页', url: 'dashboard.html' },
        { icon: '📚', text: '我的培训', url: 'my-training.html' },
        { icon: '📖', text: '学习资源', url: 'learning-resources.html' },
        { icon: '📝', text: '考试中心', url: 'exams.html' },
        { icon: '👤', text: '个人中心', url: 'profile.html' },
        { icon: '⭐', text: '积分中心', url: 'points.html' },
        { icon: '🔔', text: '通知中心', url: 'notifications.html' }
    ],
    admin: [
        { icon: '🏠', text: '首页', url: 'dashboard.html' },
        { icon: '👥', text: '人员管理', url: 'personnel.html' },
        { icon: '📚', text: '培训管理', url: 'training.html' },
        { icon: '📄', text: '内容管理', url: 'content.html' },
        { icon: '📊', text: '统计分析', url: 'statistics.html' },
        { icon: '⚙️', text: '系统设置', url: 'settings.html' },
        { icon: '🔔', text: '通知管理', url: 'notifications.html' }
    ]
};

// 初始化菜单
function initSidebar(role) {
    const menuContainer = document.getElementById('sidebarMenu');
    const currentPath = window.location.pathname;
    const currentFile = currentPath.split('/').pop();
    
    menuContainer.innerHTML = '';
    
    const menuItems = menuConfig[role] || [];
    
    menuItems.forEach(item => {
        const li = document.createElement('li');
        li.className = 'menu-item';
        
        const isActive = item.url === currentFile;
        
        li.innerHTML = `
            <a href="${item.url}" class="menu-link ${isActive ? 'active' : ''}">
                <span class="menu-icon">${item.icon}</span>
                <span class="menu-text">${item.text}</span>
            </a>
        `;
        
        menuContainer.appendChild(li);
    });
}

// 移动端菜单切换
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    sidebar.classList.toggle('open');
}

// 页面加载完成后初始化菜单
document.addEventListener('DOMContentLoaded', function() {
    // 根据当前页面路径判断角色
    const currentPath = window.location.pathname;
    let role = 'student';
    
    if (currentPath.includes('/admin/')) {
        role = 'admin';
    } else if (currentPath.includes('/student/')) {
        role = 'student';
    }
    
    initSidebar(role);
    
    // 更新角色切换按钮状态
    const roleButtons = document.querySelectorAll('.role-btn');
    roleButtons.forEach(btn => {
        btn.classList.remove('active');
        if ((role === 'student' && btn.textContent === '学员端') || 
            (role === 'admin' && btn.textContent === '管理员端')) {
            btn.classList.add('active');
        }
    });
});
</script>
