<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èµ„æºè¯¦æƒ… - å®‰å…¨åŸ¹è®­å¹³å°</title>
    <link rel="stylesheet" href="../common/styles.css">
    <style>
        .resource-player {
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin-bottom: 20px;
        }
        
        .video-container {
            width: 100%;
            height: 400px;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
        }
        
        .document-container {
            width: 100%;
            height: 500px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 16px;
            margin-bottom: 20px;
        }
        
        .learning-progress {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .progress-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            margin: 0 auto 15px;
        }
        
        .resource-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .resource-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .info-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .info-card h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 16px;
        }
        
        .info-card p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨é€šæ  - ç›´æ¥åµŒå…¥ -->
    <header class="header">
        <div class="header-left">
            <div class="logo">å®‰å…¨åŸ¹è®­å¹³å°</div>
            <div class="role-switcher">
                <button class="role-btn active" onclick="switchRole('student')">å­¦å‘˜ç«¯</button>
                <button class="role-btn" onclick="switchRole('admin')">ç®¡ç†å‘˜ç«¯</button>
            </div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="avatar">ğŸ‘¤</div>
                <span id="currentUser">å¼ ä¸‰</span>
            </div>
            <button class="btn btn-secondary" onclick="logout()">é€€å‡º</button>
        </div>
    </header>
    
    <!-- å·¦ä¾§èœå• - ç›´æ¥åµŒå…¥ -->
    <nav class="sidebar" id="sidebar">
        <ul class="sidebar-menu" id="sidebarMenu">
            <li class="menu-item">
                <a href="dashboard_simple.html" class="menu-link">
                    <span class="menu-icon">ğŸ </span>
                    <span class="menu-text">é¦–é¡µ</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="my-training.html" class="menu-link">
                    <span class="menu-icon">ğŸ“š</span>
                    <span class="menu-text">æˆ‘çš„åŸ¹è®­</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="learning-resources.html" class="menu-link active">
                    <span class="menu-icon">ğŸ“–</span>
                    <span class="menu-text">å­¦ä¹ èµ„æº</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="exams.html" class="menu-link">
                    <span class="menu-icon">ğŸ“</span>
                    <span class="menu-text">è€ƒè¯•ä¸­å¿ƒ</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="profile.html" class="menu-link">
                    <span class="menu-icon">ğŸ‘¤</span>
                    <span class="menu-text">ä¸ªäººä¸­å¿ƒ</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="points.html" class="menu-link">
                    <span class="menu-icon">â­</span>
                    <span class="menu-text">ç§¯åˆ†ä¸­å¿ƒ</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="notifications.html" class="menu-link">
                    <span class="menu-icon">ğŸ””</span>
                    <span class="menu-text">é€šçŸ¥ä¸­å¿ƒ</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <div class="content-header">
            <div style="display: flex; align-items: center; gap: 15px;">
                <button class="btn btn-secondary" onclick="goBack()">â† è¿”å›</button>
                <div>
                    <h1 class="page-title">èµ„æºè¯¦æƒ…</h1>
                    <p class="page-subtitle" id="resourceTitle">å®‰å…¨ç”Ÿäº§åŸºç¡€çŸ¥è¯†è§†é¢‘</p>
                </div>
            </div>
        </div>
        
        <!-- å­¦ä¹ è¿›åº¦ -->
        <div class="learning-progress">
            <div class="progress-circle" id="progressCircle">75%</div>
            <div style="text-align: center;">
                <h3 style="margin: 0 0 10px 0;">å­¦ä¹ è¿›åº¦</h3>
                <p style="margin: 0; opacity: 0.9;">æ‚¨å·²å®Œæˆ 75% çš„å­¦ä¹ å†…å®¹</p>
            </div>
        </div>
        
        <!-- èµ„æºæ’­æ”¾å™¨ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">å­¦ä¹ å†…å®¹</h2>
                <div>
                    <span class="badge badge-info" id="resourceType">è§†é¢‘</span>
                    <span class="badge badge-success" id="resourceDuration">45åˆ†é’Ÿ</span>
                </div>
            </div>
            <div class="card-body" style="padding: 0;">
                <!-- è§†é¢‘æ’­æ”¾å™¨ -->
                <div id="videoPlayer" class="resource-player" style="display: block;">
                    <div class="video-container">
                        <div style="text-align: center;">
                            <div style="font-size: 48px; margin-bottom: 20px;">ğŸ¥</div>
                            <div>å®‰å…¨ç”Ÿäº§åŸºç¡€çŸ¥è¯†è§†é¢‘</div>
                            <div style="font-size: 14px; margin-top: 10px; opacity: 0.8;">ç‚¹å‡»å¼€å§‹å­¦ä¹ </div>
                        </div>
                    </div>
                </div>
                
                <!-- æ–‡æ¡£æŸ¥çœ‹å™¨ -->
                <div id="documentViewer" class="document-container" style="display: none;">
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“„</div>
                        <div>æ–‡æ¡£å†…å®¹</div>
                        <div style="font-size: 14px; margin-top: 10px; opacity: 0.8;">ç‚¹å‡»æŸ¥çœ‹æ–‡æ¡£å†…å®¹</div>
                    </div>
                </div>
                
                <!-- PPTæŸ¥çœ‹å™¨ -->
                <div id="pptViewer" class="document-container" style="display: none;">
                    <div style="text-align: center;">
                        <div style="font-size: 48px; margin-bottom: 20px;">ğŸ“Š</div>
                        <div>PPTæ¼”ç¤ºæ–‡ç¨¿</div>
                        <div style="font-size: 14px; margin-top: 10px; opacity: 0.8;">ç‚¹å‡»æŸ¥çœ‹PPTå†…å®¹</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- èµ„æºä¿¡æ¯ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">èµ„æºä¿¡æ¯</h2>
            </div>
            <div class="card-body">
                <div class="resource-info-grid">
                    <div class="info-card">
                        <h4>ğŸ“š å­¦æ—¶è¦æ±‚</h4>
                        <p id="infoHours">0.75å°æ—¶</p>
                    </div>
                    <div class="info-card">
                        <h4>â­ ç§¯åˆ†å¥–åŠ±</h4>
                        <p id="infoPoints">50ç§¯åˆ†</p>
                    </div>
                    <div class="info-card">
                        <h4>ğŸ¯ éš¾åº¦ç­‰çº§</h4>
                        <p id="infoDifficulty">ç®€å•</p>
                    </div>
                    <div class="info-card">
                        <h4>ğŸ“‚ åˆ†ç±»</h4>
                        <p id="infoCategory">å®‰å…¨ç”Ÿäº§</p>
                    </div>
                    <div class="info-card">
                        <h4>ğŸ“… å‘å¸ƒæ—¶é—´</h4>
                        <p id="infoPublishDate">2024-01-10</p>
                    </div>
                    <div class="info-card">
                        <h4>ğŸ‘¥ å­¦ä¹ äººæ•°</h4>
                        <p id="infoLearners">156äºº</p>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4>ğŸ“ èµ„æºæè¿°</h4>
                    <p id="resourceDescription" style="color: #666; line-height: 1.6; margin-top: 10px;">
                        æ¶µç›–å®‰å…¨ç”Ÿäº§æ³•å¾‹æ³•è§„ã€å®‰å…¨ç®¡ç†åˆ¶åº¦ç­‰åŸºç¡€å†…å®¹ï¼Œé€‚ç”¨äºæ‰€æœ‰é•¿ç»´äººå‘˜ã€‚é€šè¿‡æœ¬è¯¾ç¨‹çš„å­¦ä¹ ï¼Œæ‚¨å°†æŒæ¡å®‰å…¨ç”Ÿäº§çš„åŸºæœ¬çŸ¥è¯†å’ŒæŠ€èƒ½ã€‚
                    </p>
                </div>
                
        
            </div>
        </div>
        
    
        
        <!-- æ“ä½œæŒ‰é’® -->
        <div class="card">
            <div class="card-body">
                <div class="resource-actions">
                    <button class="btn btn-warning" onclick="restartLearning()">ğŸ”„ é‡æ–°å­¦ä¹ </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isLearning = false;
        let learningProgress = 75; // å½“å‰å­¦ä¹ è¿›åº¦
        
        // é¡µé¢åŠ è½½æ—¶ä»URLå‚æ•°è·å–èµ„æºä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const name = urlParams.get('name');
            const type = urlParams.get('type');
            
            if (name) {
                document.getElementById('resourceTitle').textContent = name;
            }
            
            if (type) {
                const typeMap = {
                    'video': 'è§†é¢‘',
                    'ppt': 'PPT',
                    'pdf': 'PDF',
                    'word': 'Word',
                    'excel': 'Excel'
                };
                
                const typeText = typeMap[type.toLowerCase()] || type;
                document.getElementById('resourceType').textContent = typeText;
                
                // æ ¹æ®ç±»å‹æ˜¾ç¤ºç›¸åº”çš„æŸ¥çœ‹å™¨
                showViewerByType(type.toLowerCase());
                
                // æ ¹æ®è¿›åº¦æ˜¾ç¤ºç›¸åº”çš„æŒ‰é’®
                updateActionButtons();
            }
        });
        
        // æ ¹æ®ç±»å‹æ˜¾ç¤ºæŸ¥çœ‹å™¨
        function showViewerByType(type) {
            // éšè—æ‰€æœ‰æŸ¥çœ‹å™¨
            document.getElementById('videoPlayer').style.display = 'none';
            document.getElementById('documentViewer').style.display = 'none';
            document.getElementById('pptViewer').style.display = 'none';
            
            // æ˜¾ç¤ºå¯¹åº”çš„æŸ¥çœ‹å™¨
            if (type === 'video') {
                document.getElementById('videoPlayer').style.display = 'block';
            } else if (type === 'ppt') {
                document.getElementById('pptViewer').style.display = 'block';
            } else {
                document.getElementById('documentViewer').style.display = 'block';
            }
        }
        
        // æ›´æ–°æ“ä½œæŒ‰é’®
        function updateActionButtons() {
            const startBtn = document.getElementById('startBtn');
            const continueBtn = document.getElementById('continueBtn');
            
            if (learningProgress > 0 && learningProgress < 100) {
                startBtn.style.display = 'none';
                continueBtn.style.display = 'inline-block';
            } else if (learningProgress >= 100) {
                startBtn.textContent = 'âœ… å·²å®Œæˆ';
                startBtn.disabled = true;
                continueBtn.style.display = 'none';
            }
        }
        
        // è¿”å›ä¸Šä¸€é¡µ
        function goBack() {
            window.history.back();
        }
        
        // å¼€å§‹å­¦ä¹ 
        function startLearning() {
            if (confirm('ç¡®å®šè¦å¼€å§‹å­¦ä¹ è¿™ä¸ªèµ„æºå—ï¼Ÿ')) {
                isLearning = true;
                alert('æ­£åœ¨åŠ è½½å­¦ä¹ å†…å®¹...');
                setTimeout(() => {
                    alert('å­¦ä¹ å†…å®¹åŠ è½½å®Œæˆï¼å¼€å§‹å­¦ä¹ å§ï¼');
                    // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°å­¦ä¹ é¡µé¢æˆ–å¼€å§‹æ’­æ”¾
                    simulateLearning();
                }, 1000);
            }
        }
        
        // ç»§ç»­å­¦ä¹ 
        function continueLearning() {
            if (confirm('ç¡®å®šè¦ç»§ç»­å­¦ä¹ å—ï¼Ÿ')) {
                isLearning = true;
                alert('æ­£åœ¨æ¢å¤å­¦ä¹ è¿›åº¦...');
                setTimeout(() => {
                    alert('å­¦ä¹ è¿›åº¦å·²æ¢å¤ï¼');
                    simulateLearning();
                }, 1000);
            }
        }
        
        // é‡æ–°å­¦ä¹ 
        function restartLearning() {
            if (confirm('ç¡®å®šè¦é‡æ–°å­¦ä¹ å—ï¼Ÿ\n\nè¿™å°†é‡ç½®æ‚¨çš„å­¦ä¹ è¿›åº¦ã€‚')) {
                learningProgress = 0;
                updateProgress();
                updateActionButtons();
                alert('å­¦ä¹ è¿›åº¦å·²é‡ç½®ï¼');
            }
        }
        
        // ä¸‹è½½èµ„æº
        function downloadResource() {
            const resourceName = document.getElementById('resourceTitle').textContent;
            if (confirm(`ç¡®å®šè¦ä¸‹è½½èµ„æº"${resourceName}"å—ï¼Ÿ`)) {
                alert('æ­£åœ¨ä¸‹è½½èµ„æº...');
                setTimeout(() => {
                    alert('èµ„æºä¸‹è½½å®Œæˆï¼');
                }, 1000);
            }
        }
        
        // æ·»åŠ åˆ°æ”¶è—
        function addToFavorites() {
            const resourceName = document.getElementById('resourceTitle').textContent;
            alert(`å·²å°†"${resourceName}"æ·»åŠ åˆ°æ”¶è—å¤¹ï¼`);
        }
        
        // åˆ†äº«èµ„æº
        function shareResource() {
            const resourceName = document.getElementById('resourceTitle').textContent;
            const shareUrl = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: resourceName,
                    text: 'æŸ¥çœ‹è¿™ä¸ªå­¦ä¹ èµ„æº',
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert('åˆ†äº«é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
                });
            }
        }
        
        // æ¨¡æ‹Ÿå­¦ä¹ è¿‡ç¨‹
        function simulateLearning() {
            const interval = setInterval(() => {
                if (!isLearning) {
                    clearInterval(interval);
                    return;
                }
                
                learningProgress += 5;
                if (learningProgress > 100) {
                    learningProgress = 100;
                    isLearning = false;
                    clearInterval(interval);
                    alert('æ­å–œï¼æ‚¨å·²å®Œæˆå­¦ä¹ ï¼');
                }
                
                updateProgress();
                updateActionButtons();
            }, 2000);
        }
        
        // æ›´æ–°è¿›åº¦æ˜¾ç¤º
        function updateProgress() {
            document.getElementById('progressCircle').textContent = learningProgress + '%';
            
            // æ›´æ–°è¿›åº¦æ¡
            const progressBars = document.querySelectorAll('.progress-bar');
            progressBars.forEach(bar => {
                bar.style.width = learningProgress + '%';
            });
        }
        
        // è§’è‰²åˆ‡æ¢åŠŸèƒ½
        function switchRole(role) {
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            if (role === 'student') {
                window.location.href = 'dashboard_simple.html';
            } else if (role === 'admin') {
                window.location.href = '../admin/dashboard_simple.html';
            }
        }

        // é€€å‡ºåŠŸèƒ½
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç³»ç»Ÿå—ï¼Ÿ')) {
                window.location.href = '../index.html';
            }
        }

        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
        function updateUserInfo(username) {
            document.getElementById('currentUser').textContent = username;
        }
    </script>
</body>
</html>
