<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>通知中心 - 安全培训平台</title>
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
    <!-- 顶部通栏 - 直接嵌入 -->
    <header class="header">
        <div class="header-left">
            <div class="logo">安全培训平台</div>
            <div class="role-switcher">
                <button class="role-btn active" onclick="switchRole('student')">学员端</button>
                <button class="role-btn" onclick="switchRole('admin')">管理员端</button>
            </div>
        </div>
        <div class="header-right">
            <div class="user-info">
                <div class="avatar">👤</div>
                <span id="currentUser">张三</span>
            </div>
            <button class="btn btn-secondary" onclick="logout()">退出</button>
        </div>
    </header>
    
    <!-- 左侧菜单 - 直接嵌入 -->
    <nav class="sidebar" id="sidebar">
        <ul class="sidebar-menu" id="sidebarMenu">
            <li class="menu-item">
                <a href="dashboard_simple.html" class="menu-link">
                    <span class="menu-icon">🏠</span>
                    <span class="menu-text">首页</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="my-training.html" class="menu-link">
                    <span class="menu-icon">📚</span>
                    <span class="menu-text">我的培训</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="learning-resources.html" class="menu-link">
                    <span class="menu-icon">📖</span>
                    <span class="menu-text">学习资源</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="exams.html" class="menu-link">
                    <span class="menu-icon">📝</span>
                    <span class="menu-text">考试中心</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="profile.html" class="menu-link">
                    <span class="menu-icon">👤</span>
                    <span class="menu-text">个人中心</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="points.html" class="menu-link">
                    <span class="menu-icon">⭐</span>
                    <span class="menu-text">积分中心</span>
                </a>
            </li>
            <li class="menu-item">
                <a href="notifications.html" class="menu-link active">
                    <span class="menu-icon">🔔</span>
                    <span class="menu-text">通知中心</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="page-title">通知中心</h1>
            <p class="page-subtitle">培训通知推送</p>
        </div>
        
        <!-- 通知统计 -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">📢</div>
                <div class="stat-number">8</div>
                <div class="stat-label">未读通知</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">📚</div>
                <div class="stat-number">5</div>
                <div class="stat-label">培训通知</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">📝</div>
                <div class="stat-number">3</div>
                <div class="stat-label">考试通知</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon red">🔔</div>
                <div class="stat-number">12</div>
                <div class="stat-label">系统通知</div>
            </div>
        </div>
        
        <!-- 通知筛选 -->
        <div class="card">
            <div class="card-body">
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                    <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                        <select class="form-control">
                            <option value="">全部类型</option>
                            <option value="training">培训通知</option>
                            <option value="exam">考试通知</option>
                            <option value="system">系统通知</option>
                            <option value="reminder">催办通知</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                        <select class="form-control">
                            <option value="">全部状态</option>
                            <option value="unread">未读</option>
                            <option value="read">已读</option>
                        </select>
                    </div>
                    <button class="btn btn-primary">🔍 筛选</button>
                    <button class="btn btn-success" onclick="markAllRead()">✅ 全部标记为已读</button>
                </div>
            </div>
        </div>
        
        <!-- 通知列表 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">通知列表</h2>
            </div>
            <div class="card-body">
                <div style="max-height: 600px; overflow-y: auto;">
                    <!-- 未读通知 -->
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee; background: #f8f9fa;">
                        <div style="width: 40px; height: 40px; background: #dc3545; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">📢</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #333;">消防安全考试通知</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-16 09:00</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">您有一个消防安全考试将于明天上午9:00开始，请提前做好准备。考试时长60分钟，及格分数80分。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-danger">考试通知</span>
                                <span class="badge badge-warning">未读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-primary btn-sm" onclick="markAsRead(this)">标记已读</button>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee; background: #f8f9fa;">
                        <div style="width: 40px; height: 40px; background: #28a745; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">📚</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #333;">新培训课程发布</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-15 14:30</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">管理员为您分配了新的培训课程"化工安全培训"，请及时完成学习。课程时长5小时，完成后可获得相应积分。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-info">培训通知</span>
                                <span class="badge badge-warning">未读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-primary btn-sm" onclick="markAsRead(this)">标记已读</button>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee; background: #f8f9fa;">
                        <div style="width: 40px; height: 40px; background: #ffc107; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">⏰</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #333;">培训催办通知</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-15 10:15</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">您还有未完成的培训课程"安全生产基础知识培训"，请尽快完成学习。截止时间：2024-02-10。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-warning">催办通知</span>
                                <span class="badge badge-warning">未读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-primary btn-sm" onclick="markAsRead(this)">标记已读</button>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                    
                    <!-- 已读通知 -->
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee;">
                        <div style="width: 40px; height: 40px; background: #6c757d; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">📝</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #666;">电气安全考试结果</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-15 11:30</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">恭喜您通过了电气安全考试，成绩：88分。您已获得相应的积分奖励，请查看个人中心。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-success">考试通知</span>
                                <span class="badge badge-success">已读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee;">
                        <div style="width: 40px; height: 40px; background: #6c757d; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">🏆</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #666;">证书获得通知</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-15 14:30</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">您已成功完成"安全生产基础知识培训"，获得相应证书。证书有效期至2025-01-15。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-info">系统通知</span>
                                <span class="badge badge-success">已读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; border-bottom: 1px solid #eee;">
                        <div style="width: 40px; height: 40px; background: #6c757d; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 16px;">🔔</div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <h4 style="margin: 0; color: #666;">系统维护通知</h4>
                                <span style="color: #666; font-size: 12px;">2024-01-14 18:00</span>
                            </div>
                            <p style="color: #666; margin: 0; font-size: 14px;">系统将于2024-01-16 02:00-04:00进行维护升级，期间可能影响正常使用，请提前安排学习计划。</p>
                            <div style="margin-top: 10px;">
                                <span class="badge badge-info">系统通知</span>
                                <span class="badge badge-success">已读</span>
                            </div>
                        </div>
                        <div>
                            <button class="btn btn-secondary btn-sm">查看详情</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 通知设置 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">通知设置</h2>
            </div>
            <div class="card-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div>
                        <h4 style="margin-bottom: 20px;">推送设置</h4>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span>培训通知</span>
                            <label style="position: relative; display: inline-block; width: 50px; height: 24px;">
                                <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #28a745; transition: .4s; border-radius: 24px;"></span>
                                <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span>考试通知</span>
                            <label style="position: relative; display: inline-block; width: 50px; height: 24px;">
                                <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #28a745; transition: .4s; border-radius: 24px;"></span>
                                <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span>催办通知</span>
                            <label style="position: relative; display: inline-block; width: 50px; height: 24px;">
                                <input type="checkbox" checked style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #28a745; transition: .4s; border-radius: 24px;"></span>
                                <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span>系统通知</span>
                            <label style="position: relative; display: inline-block; width: 50px; height: 24px;">
                                <input type="checkbox" style="opacity: 0; width: 0; height: 0;">
                                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 24px;"></span>
                                <span style="position: absolute; content: ''; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%;"></span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <h4 style="margin-bottom: 20px;">提醒时间</h4>
                        <div class="form-group">
                            <label class="form-label">考试提醒</label>
                            <select class="form-control">
                                <option value="1">考试前1小时</option>
                                <option value="2">考试前2小时</option>
                                <option value="24">考试前1天</option>
                                <option value="48">考试前2天</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">培训截止提醒</label>
                            <select class="form-control">
                                <option value="1">截止前1天</option>
                                <option value="3">截止前3天</option>
                                <option value="7">截止前1周</option>
                            </select>
                        </div>
                        <button class="btn btn-primary">保存设置</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 标记为已读
        function markAsRead(button) {
            const notification = button.closest('div[style*="background: #f8f9fa"]');
            if (notification) {
                notification.style.background = '';
                const badge = notification.querySelector('.badge-warning');
                if (badge) {
                    badge.textContent = '已读';
                    badge.className = 'badge badge-success';
                }
                button.textContent = '已读';
                button.className = 'btn btn-secondary btn-sm';
                button.disabled = true;
            }
        }
        
        // 全部标记为已读
        function markAllRead() {
            if (confirm('确定要将所有通知标记为已读吗？')) {
                const unreadNotifications = document.querySelectorAll('div[style*="background: #f8f9fa"]');
                unreadNotifications.forEach(notification => {
                    notification.style.background = '';
                    const badge = notification.querySelector('.badge-warning');
                    if (badge) {
                        badge.textContent = '已读';
                        badge.className = 'badge badge-success';
                    }
                    const button = notification.querySelector('.btn-primary');
                    if (button) {
                        button.textContent = '已读';
                        button.className = 'btn btn-secondary btn-sm';
                        button.disabled = true;
                    }
                });
                alert('所有通知已标记为已读');
            }
        }
        
        // 角色切换功能
        function switchRole(role) {
            // 移除所有active类
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 添加active类到当前按钮
            event.target.classList.add('active');
            
            // 根据角色跳转到对应页面
            if (role === 'student') {
                window.location.href = 'dashboard_simple.html';
            } else if (role === 'admin') {
                window.location.href = '../admin/dashboard_simple.html';
            }
        }

        // 退出功能
        function logout() {
            if (confirm('确定要退出系统吗？')) {
                window.location.href = '../index.html';
            }
        }

        // 更新用户信息
        function updateUserInfo(username) {
            document.getElementById('currentUser').textContent = username;
        }
    </script>
</body>
</html>
