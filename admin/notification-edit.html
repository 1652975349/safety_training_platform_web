<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¼–è¾‘é€šçŸ¥ - å®‰å…¨åŸ¹è®­å¹³å°</title>
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
<!-- é¡¶éƒ¨é€šæ  - ç›´æ¥åµŒå…¥ -->
<header class="header">
    <div class="header-left">
        <div class="logo">å®‰å…¨åŸ¹è®­å¹³å°</div>
        <div class="role-switcher">
            <button class="role-btn" onclick="switchRole('student')">å­¦å‘˜ç«¯</button>
            <button class="role-btn active" onclick="switchRole('admin')">ç®¡ç†å‘˜ç«¯</button>
        </div>
    </div>
    <div class="header-right">
        <div class="user-info">
            <div class="avatar">ğŸ‘¤</div>
            <span id="currentUser">ç®¡ç†å‘˜</span>
        </div>
        <button class="btn btn-secondary" onclick="logout()">é€€å‡º</button>
    </div>
</header>

<!-- å·¦ä¾§èœå• - ç›´æ¥åµŒå…¥ -->
<nav class="sidebar" id="sidebar">
    <ul class="sidebar-menu" id="sidebarMenu">
        <li class="menu-item">
            <a href="dashboard_simple.html" class="menu-link">
                <span class="menu-icon">ğŸ </span>
                <span class="menu-text">é¦–é¡µ</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="personnel.html" class="menu-link">
                <span class="menu-icon">ğŸ‘¥</span>
                <span class="menu-text">äººå‘˜ç®¡ç†</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="training.html" class="menu-link">
                <span class="menu-icon">ğŸ“š</span>
                <span class="menu-text">åŸ¹è®­ç®¡ç†</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="content.html" class="menu-link">
                <span class="menu-icon">ğŸ“„</span>
                <span class="menu-text">å†…å®¹ç®¡ç†</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="statistics.html" class="menu-link">
                <span class="menu-icon">ğŸ“Š</span>
                <span class="menu-text">ç»Ÿè®¡åˆ†æ</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="settings.html" class="menu-link">
                <span class="menu-icon">âš™ï¸</span>
                <span class="menu-text">ç³»ç»Ÿè®¾ç½®</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="notifications.html" class="menu-link active">
                <span class="menu-icon">ğŸ””</span>
                <span class="menu-text">é€šçŸ¥ç®¡ç†</span>
            </a>
        </li>
    </ul>
</nav>
    
    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="page-title">ç¼–è¾‘é€šçŸ¥</h1>
            <p class="page-subtitle">ä¿®æ”¹é€šçŸ¥ä¿¡æ¯</p>
        </div>
        
        <!-- é€šçŸ¥ç¼–è¾‘è¡¨å• -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">é€šçŸ¥ä¿¡æ¯</h2>
            </div>
            <div class="card-body">
                <form id="notificationForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="notificationTitle">é€šçŸ¥æ ‡é¢˜ *</label>
                            <input type="text" id="notificationTitle" class="form-control" placeholder="è¯·è¾“å…¥é€šçŸ¥æ ‡é¢˜" required>
                        </div>
                        <div class="form-group">
                            <label for="notificationType">é€šçŸ¥ç±»å‹ *</label>
                            <select id="notificationType" class="form-control" required>
                                <option value="">è¯·é€‰æ‹©é€šçŸ¥ç±»å‹</option>
                                <option value="training">åŸ¹è®­é€šçŸ¥</option>
                                <option value="exam">è€ƒè¯•é€šçŸ¥</option>
                                <option value="system">ç³»ç»Ÿé€šçŸ¥</option>
                                <option value="reminder">å‚¬åŠé€šçŸ¥</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="recipients">æ¥æ”¶å¯¹è±¡ *</label>
                            <select id="recipients" class="form-control" required>
                                <option value="">è¯·é€‰æ‹©æ¥æ”¶å¯¹è±¡</option>
                                <option value="all">å…¨ä½“ç”¨æˆ·</option>
                                <option value="students">å…¨ä½“å­¦å‘˜</option>
                                <option value="admins">å…¨ä½“ç®¡ç†å‘˜</option>
                                <option value="production">ç”Ÿäº§éƒ¨å…¨ä½“å­¦å‘˜</option>
                                <option value="technical">æŠ€æœ¯éƒ¨å…¨ä½“å­¦å‘˜</option>
                                <option value="maintenance">ç»´ä¿®éƒ¨å…¨ä½“å­¦å‘˜</option>
                                <option value="safety">å®‰å…¨éƒ¨å…¨ä½“å­¦å‘˜</option>
                                <option value="custom">è‡ªå®šä¹‰é€‰æ‹©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="priority">ä¼˜å…ˆçº§</label>
                            <select id="priority" class="form-control">
                                <option value="normal">æ™®é€š</option>
                                <option value="high">é«˜</option>
                                <option value="urgent">ç´§æ€¥</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="notificationContent">é€šçŸ¥å†…å®¹ *</label>
                        <textarea id="notificationContent" class="form-control" rows="8" placeholder="è¯·è¾“å…¥é€šçŸ¥å†…å®¹" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="sendTime">å‘é€æ—¶é—´</label>
                            <input type="datetime-local" id="sendTime" class="form-control">
                            <small class="form-text text-muted">ç•™ç©ºè¡¨ç¤ºç«‹å³å‘é€</small>
                        </div>
                        <div class="form-group">
                            <label for="expireTime">è¿‡æœŸæ—¶é—´</label>
                            <input type="datetime-local" id="expireTime" class="form-control">
                            <small class="form-text text-muted">é€šçŸ¥è¿‡æœŸæ—¶é—´ï¼ˆå¯é€‰ï¼‰</small>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="sendEmail"> åŒæ—¶å‘é€é‚®ä»¶é€šçŸ¥
                        </label>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="sendSms"> åŒæ—¶å‘é€çŸ­ä¿¡é€šçŸ¥
                        </label>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="saveDraft()">ä¿å­˜è‰ç¨¿</button>
                        <button type="button" class="btn btn-primary" onclick="updateNotification()">æ›´æ–°é€šçŸ¥</button>
                        <button type="button" class="btn btn-warning" onclick="resendNotification()">é‡æ–°å‘é€</button>
                        <button type="button" class="btn btn-outline" onclick="goBack()">è¿”å›</button>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- é¢„è§ˆåŒºåŸŸ -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">é€šçŸ¥é¢„è§ˆ</h2>
            </div>
            <div class="card-body">
                <div id="notificationPreview" class="notification-preview">
                    <div class="preview-header">
                        <h3 id="previewTitle">é€šçŸ¥æ ‡é¢˜</h3>
                        <div class="preview-meta">
                            <span id="previewType" class="badge badge-info">é€šçŸ¥ç±»å‹</span>
                            <span id="previewPriority" class="badge badge-secondary">ä¼˜å…ˆçº§</span>
                        </div>
                    </div>
                    <div class="preview-content">
                        <p id="previewContent">é€šçŸ¥å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
                    </div>
                    <div class="preview-footer">
                        <small class="text-muted">
                            æ¥æ”¶å¯¹è±¡ï¼š<span id="previewRecipients">-</span> | 
                            å‘é€æ—¶é—´ï¼š<span id="previewSendTime">-</span>
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ä»URLå‚æ•°è·å–é€šçŸ¥ä¿¡æ¯
        function getNotificationInfo() {
            const urlParams = new URLSearchParams(window.location.search);
            return {
                title: urlParams.get('title') || '',
                type: urlParams.get('type') || '',
                recipients: urlParams.get('recipients') || '',
                sendTime: urlParams.get('sendTime') || '',
                status: urlParams.get('status') || ''
            };
        }
        
        // åŠ è½½é€šçŸ¥ä¿¡æ¯åˆ°è¡¨å•
        function loadNotificationInfo() {
            const info = getNotificationInfo();
            
            document.getElementById('notificationTitle').value = info.title;
            document.getElementById('notificationType').value = info.type;
            document.getElementById('recipients').value = getRecipientsValue(info.recipients);
            document.getElementById('sendTime').value = formatDateTime(info.sendTime);
            
            // æ ¹æ®é€šçŸ¥æ ‡é¢˜åŠ è½½å¯¹åº”çš„å†…å®¹
            document.getElementById('notificationContent').value = getNotificationContent(info.title);
            
            // æ›´æ–°é¢„è§ˆ
            updatePreview();
        }
        
        function getRecipientsValue(recipients) {
            const recipientsMap = {
                'å…¨ä½“ç”¨æˆ·': 'all',
                'å…¨ä½“å­¦å‘˜': 'students',
                'å…¨ä½“ç®¡ç†å‘˜': 'admins',
                'ç”Ÿäº§éƒ¨å…¨ä½“å­¦å‘˜': 'production',
                'æŠ€æœ¯éƒ¨å…¨ä½“å­¦å‘˜': 'technical',
                'ç»´ä¿®éƒ¨å…¨ä½“å­¦å‘˜': 'maintenance',
                'å®‰å…¨éƒ¨å…¨ä½“å­¦å‘˜': 'safety'
            };
            return recipientsMap[recipients] || '';
        }
        
        function formatDateTime(dateTimeStr) {
            if (!dateTimeStr) return '';
            // å°† "2024-01-16 09:00" æ ¼å¼è½¬æ¢ä¸º "2024-01-16T09:00"
            return dateTimeStr.replace(' ', 'T');
        }
        
        function getNotificationContent(title) {
            const contentMap = {
                'æ¶ˆé˜²å®‰å…¨è€ƒè¯•é€šçŸ¥': `å„ä½åŒäº‹ï¼š

æ ¹æ®å…¬å¸å®‰å…¨åŸ¹è®­è®¡åˆ’ï¼Œç°å®šäº2024å¹´1æœˆ20æ—¥ï¼ˆå‘¨å…­ï¼‰ä¸Šåˆ9:00-11:00è¿›è¡Œæ¶ˆé˜²å®‰å…¨çŸ¥è¯†è€ƒè¯•ã€‚

è€ƒè¯•å®‰æ’ï¼š
â€¢ è€ƒè¯•æ—¶é—´ï¼š2024å¹´1æœˆ20æ—¥ 9:00-11:00
â€¢ è€ƒè¯•åœ°ç‚¹ï¼šå…¬å¸åŸ¹è®­ä¸­å¿ƒ
â€¢ è€ƒè¯•å½¢å¼ï¼šé—­å·è€ƒè¯•
â€¢ è€ƒè¯•å†…å®¹ï¼šæ¶ˆé˜²å®‰å…¨åŸºç¡€çŸ¥è¯†ã€æ¶ˆé˜²å™¨æä½¿ç”¨ã€åº”æ€¥é€ƒç”Ÿç­‰

æ³¨æ„äº‹é¡¹ï¼š
â€¢ è¯·æºå¸¦èº«ä»½è¯ä»¶å‚åŠ è€ƒè¯•
â€¢ è€ƒè¯•æœŸé—´è¯·å…³é—­æ‰‹æœºç­‰é€šè®¯è®¾å¤‡
â€¢ è€ƒè¯•åˆæ ¼åˆ†æ•°ä¸º80åˆ†
â€¢ æœªé€šè¿‡è€ƒè¯•è€…éœ€å‚åŠ è¡¥è€ƒ

è¯·å„ä½åŒäº‹è®¤çœŸå‡†å¤‡ï¼ŒæŒ‰æ—¶å‚åŠ è€ƒè¯•ã€‚

ç‰¹æ­¤é€šçŸ¥ã€‚

å®‰å…¨åŸ¹è®­éƒ¨
2024å¹´1æœˆ16æ—¥`,
                'æ–°åŸ¹è®­è¯¾ç¨‹å‘å¸ƒ': `å„ä½åŒäº‹ï¼š

å…¬å¸æ–°å¢åŒ–å·¥å®‰å…¨åŸ¹è®­è¯¾ç¨‹ï¼Œç°æ­£å¼å‘å¸ƒï¼Œè¯·ç›¸å…³äººå‘˜è¿›è¡Œå­¦ä¹ ã€‚

è¯¾ç¨‹ä¿¡æ¯ï¼š
â€¢ è¯¾ç¨‹åç§°ï¼šåŒ–å·¥å®‰å…¨åŸºç¡€çŸ¥è¯†
â€¢ è¯¾ç¨‹æ—¶é•¿ï¼š2å°æ—¶
â€¢ å­¦ä¹ æ–¹å¼ï¼šåœ¨çº¿å­¦ä¹ 
â€¢ å®ŒæˆæœŸé™ï¼š2024å¹´1æœˆ31æ—¥å‰

è¯·æŠ€æœ¯éƒ¨å…¨ä½“å­¦å‘˜åŠæ—¶ç™»å½•ç³»ç»Ÿè¿›è¡Œå­¦ä¹ ã€‚

ç‰¹æ­¤é€šçŸ¥ã€‚

å®‰å…¨åŸ¹è®­éƒ¨
2024å¹´1æœˆ15æ—¥`,
                'åŸ¹è®­å‚¬åŠé€šçŸ¥': `å„ä½åŒäº‹ï¼š

æ ¹æ®åŸ¹è®­è®°å½•ï¼Œéƒ¨åˆ†å­¦å‘˜å°šæœªå®Œæˆè§„å®šçš„å®‰å…¨åŸ¹è®­è¯¾ç¨‹ï¼Œç°è¿›è¡Œå‚¬åŠã€‚

æœªå®ŒæˆåŸ¹è®­äººå‘˜ï¼š
â€¢ å¼ ä¸‰ - æ¶ˆé˜²å®‰å…¨åŸ¹è®­
â€¢ æå›› - åŒ–å­¦å“å®‰å…¨åŸ¹è®­
â€¢ ç‹äº” - è®¾å¤‡å®‰å…¨åŸ¹è®­

è¯·ä»¥ä¸Šäººå‘˜äº2024å¹´1æœˆ25æ—¥å‰å®Œæˆç›¸å…³åŸ¹è®­ï¼Œé€¾æœŸå°†å½±å“å·¥ä½œå®‰æ’ã€‚

ç‰¹æ­¤å‚¬åŠã€‚

å®‰å…¨åŸ¹è®­éƒ¨
2024å¹´1æœˆ15æ—¥`,
                'ç³»ç»Ÿç»´æŠ¤é€šçŸ¥': `å„ä½ç”¨æˆ·ï¼š

ä¸ºäº†æå‡ç³»ç»Ÿæ€§èƒ½å’Œç¨³å®šæ€§ï¼Œæˆ‘ä»¬å°†äºä»Šæ™šè¿›è¡Œç³»ç»Ÿç»´æŠ¤å‡çº§ã€‚

ç»´æŠ¤æ—¶é—´ï¼š2024å¹´1æœˆ17æ—¥ 02:00-06:00
å½±å“èŒƒå›´ï¼šç³»ç»Ÿå°†æš‚æ—¶æ— æ³•è®¿é—®

ç»´æŠ¤å†…å®¹ï¼š
â€¢ æ•°æ®åº“ä¼˜åŒ–
â€¢ ç³»ç»Ÿæ€§èƒ½æå‡
â€¢ å®‰å…¨è¡¥ä¸æ›´æ–°

ç»´æŠ¤æœŸé—´ç»™æ‚¨å¸¦æ¥çš„ä¸ä¾¿ï¼Œæ•¬è¯·è°…è§£ã€‚

ç‰¹æ­¤é€šçŸ¥ã€‚

æŠ€æœ¯éƒ¨
2024å¹´1æœˆ16æ—¥`,
                'æœˆåº¦åŸ¹è®­æ€»ç»“': `å„ä½ç®¡ç†å‘˜ï¼š

ç°å°†1æœˆä»½åŸ¹è®­å®Œæˆæƒ…å†µè¿›è¡Œæ€»ç»“æ±‡æŠ¥ã€‚

åŸ¹è®­å®Œæˆæƒ…å†µï¼š
â€¢ è®¡åˆ’åŸ¹è®­äººæ•°ï¼š150äºº
â€¢ å®é™…å®Œæˆäººæ•°ï¼š142äºº
â€¢ å®Œæˆç‡ï¼š94.7%
â€¢ å¹³å‡æˆç»©ï¼š87.5åˆ†

ä¸»è¦é—®é¢˜ï¼š
â€¢ éƒ¨åˆ†äººå‘˜å­¦ä¹ ç§¯ææ€§ä¸é«˜
â€¢ åŸ¹è®­å†…å®¹éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–
â€¢ è€ƒè¯•é€šè¿‡ç‡æœ‰å¾…æé«˜

æ”¹è¿›æªæ–½ï¼š
â€¢ åŠ å¼ºåŸ¹è®­å®£ä¼ å’ŒåŠ¨å‘˜
â€¢ ä¼˜åŒ–åŸ¹è®­å†…å®¹å’Œå½¢å¼
â€¢ å»ºç«‹åŸ¹è®­æ¿€åŠ±æœºåˆ¶

ç‰¹æ­¤æ±‡æŠ¥ã€‚

å®‰å…¨åŸ¹è®­éƒ¨
2024å¹´1æœˆ31æ—¥`
            };
            
            return contentMap[title] || '';
        }
        
        // å®æ—¶é¢„è§ˆåŠŸèƒ½
        function updatePreview() {
            const title = document.getElementById('notificationTitle').value || 'é€šçŸ¥æ ‡é¢˜';
            const type = document.getElementById('notificationType').value;
            const content = document.getElementById('notificationContent').value || 'é€šçŸ¥å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            const recipients = document.getElementById('recipients').value;
            const priority = document.getElementById('priority').value;
            const sendTime = document.getElementById('sendTime').value;
            
            document.getElementById('previewTitle').textContent = title;
            document.getElementById('previewContent').textContent = content;
            document.getElementById('previewRecipients').textContent = getRecipientsText(recipients);
            document.getElementById('previewSendTime').textContent = sendTime ? new Date(sendTime).toLocaleString() : 'ç«‹å³å‘é€';
            
            // æ›´æ–°ç±»å‹æ ‡ç­¾
            const typeText = getTypeText(type);
            const typeElement = document.getElementById('previewType');
            typeElement.textContent = typeText;
            typeElement.className = `badge ${getTypeBadgeClass(type)}`;
            
            // æ›´æ–°ä¼˜å…ˆçº§æ ‡ç­¾
            const priorityText = getPriorityText(priority);
            const priorityElement = document.getElementById('previewPriority');
            priorityElement.textContent = priorityText;
            priorityElement.className = `badge ${getPriorityBadgeClass(priority)}`;
        }
        
        function getTypeText(type) {
            const typeMap = {
                'training': 'åŸ¹è®­é€šçŸ¥',
                'exam': 'è€ƒè¯•é€šçŸ¥',
                'system': 'ç³»ç»Ÿé€šçŸ¥',
                'reminder': 'å‚¬åŠé€šçŸ¥'
            };
            return typeMap[type] || 'é€šçŸ¥ç±»å‹';
        }
        
        function getTypeBadgeClass(type) {
            const classMap = {
                'training': 'badge-info',
                'exam': 'badge-danger',
                'system': 'badge-info',
                'reminder': 'badge-warning'
            };
            return classMap[type] || 'badge-secondary';
        }
        
        function getPriorityText(priority) {
            const priorityMap = {
                'normal': 'æ™®é€š',
                'high': 'é«˜',
                'urgent': 'ç´§æ€¥'
            };
            return priorityMap[priority] || 'æ™®é€š';
        }
        
        function getPriorityBadgeClass(priority) {
            const classMap = {
                'normal': 'badge-secondary',
                'high': 'badge-warning',
                'urgent': 'badge-danger'
            };
            return classMap[priority] || 'badge-secondary';
        }
        
        function getRecipientsText(recipients) {
            const recipientsMap = {
                'all': 'å…¨ä½“ç”¨æˆ·',
                'students': 'å…¨ä½“å­¦å‘˜',
                'admins': 'å…¨ä½“ç®¡ç†å‘˜',
                'production': 'ç”Ÿäº§éƒ¨å…¨ä½“å­¦å‘˜',
                'technical': 'æŠ€æœ¯éƒ¨å…¨ä½“å­¦å‘˜',
                'maintenance': 'ç»´ä¿®éƒ¨å…¨ä½“å­¦å‘˜',
                'safety': 'å®‰å…¨éƒ¨å…¨ä½“å­¦å‘˜',
                'custom': 'è‡ªå®šä¹‰é€‰æ‹©'
            };
            return recipientsMap[recipients] || '-';
        }
        
        // ä¿å­˜è‰ç¨¿
        function saveDraft() {
            const form = document.getElementById('notificationForm');
            if (!form.checkValidity()) {
                alert('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
                return;
            }
            
            alert('æ­£åœ¨ä¿å­˜è‰ç¨¿...');
            setTimeout(() => {
                alert('è‰ç¨¿ä¿å­˜æˆåŠŸï¼');
                window.location.href = 'notifications.html';
            }, 1000);
        }
        
        // æ›´æ–°é€šçŸ¥
        function updateNotification() {
            const form = document.getElementById('notificationForm');
            if (!form.checkValidity()) {
                alert('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
                return;
            }
            
            if (confirm('ç¡®å®šè¦æ›´æ–°æ­¤é€šçŸ¥å—ï¼Ÿ')) {
                alert('æ­£åœ¨æ›´æ–°é€šçŸ¥...');
                setTimeout(() => {
                    alert('é€šçŸ¥æ›´æ–°æˆåŠŸï¼');
                    window.location.href = 'notifications.html';
                }, 1000);
            }
        }
        
        // é‡æ–°å‘é€
        function resendNotification() {
            const form = document.getElementById('notificationForm');
            if (!form.checkValidity()) {
                alert('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
                return;
            }
            
            if (confirm('ç¡®å®šè¦é‡æ–°å‘é€æ­¤é€šçŸ¥å—ï¼Ÿ')) {
                alert('æ­£åœ¨é‡æ–°å‘é€é€šçŸ¥...');
                setTimeout(() => {
                    alert('é€šçŸ¥é‡æ–°å‘é€æˆåŠŸï¼');
                    window.location.href = 'notifications.html';
                }, 1000);
            }
        }
        
        // è¿”å›
        function goBack() {
            if (confirm('ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæœªä¿å­˜çš„ä¿®æ”¹å°†ä¸¢å¤±ã€‚')) {
                window.location.href = 'notifications.html';
            }
        }
        
        // è§’è‰²åˆ‡æ¢åŠŸèƒ½
        function switchRole(role) {
            // ç§»é™¤æ‰€æœ‰activeç±»
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ·»åŠ activeç±»åˆ°å½“å‰æŒ‰é’®
            event.target.classList.add('active');
            
            // æ ¹æ®è§’è‰²è·³è½¬åˆ°å¯¹åº”é¡µé¢
            if (role === 'student') {
                window.location.href = '../student/dashboard_simple.html';
            } else if (role === 'admin') {
                window.location.href = 'dashboard_simple.html';
            }
        }

        // é€€å‡ºåŠŸèƒ½
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç³»ç»Ÿå—ï¼Ÿ')) {
                window.location.href = '../index.html';
            }
        }

        // æ›´æ–°ç”¨æˆ·ä¿¡æ¯
        function updateUserInfo(username) {
            document.getElementById('currentUser').textContent = username;
        }
        
        // ç»‘å®šè¾“å…¥äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // åŠ è½½é€šçŸ¥ä¿¡æ¯
            loadNotificationInfo();
            
            const inputs = ['notificationTitle', 'notificationType', 'notificationContent', 'recipients', 'priority', 'sendTime'];
            inputs.forEach(id => {
                document.getElementById(id).addEventListener('input', updatePreview);
                document.getElementById(id).addEventListener('change', updatePreview);
            });
        });
    </script>
    
    <style>
        .notification-preview {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .preview-header {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .preview-header h3 {
            margin: 0 0 10px 0;
            color: #333;
        }
        
        .preview-meta {
            display: flex;
            gap: 10px;
        }
        
        .preview-content {
            margin-bottom: 15px;
            line-height: 1.6;
            white-space: pre-line;
        }
        
        .preview-footer {
            font-size: 12px;
            color: #666;
        }
        
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
    </style>
</body>
</html>
