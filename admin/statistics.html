<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>统计分析 - 安全培训平台</title>
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
  <!-- 顶部通栏 - 直接嵌入 -->
  <header class="header">
    <div class="header-left">
        <div class="logo">安全培训平台</div>
        <div class="role-switcher">
            <button class="role-btn" onclick="switchRole('student')">学员端</button>
            <button class="role-btn active" onclick="switchRole('admin')">管理员端</button>
        </div>
    </div>
    <div class="header-right">
        <div class="user-info">
            <div class="avatar">👤</div>
            <span id="currentUser">管理员</span>
        </div>
        <button class="btn btn-secondary" onclick="logout()">退出</button>
    </div>
</header>

<!-- 左侧菜单 - 直接嵌入 -->
<nav class="sidebar" id="sidebar">
    <ul class="sidebar-menu" id="sidebarMenu">
        <li class="menu-item">
            <a href="dashboard_simple.html" class="menu-link">
                <span class="menu-icon">🏠</span>
                <span class="menu-text">首页</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="personnel.html" class="menu-link">
                <span class="menu-icon">👥</span>
                <span class="menu-text">人员管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="training.html" class="menu-link">
                <span class="menu-icon">📚</span>
                <span class="menu-text">培训管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="content.html" class="menu-link">
                <span class="menu-icon">📄</span>
                <span class="menu-text">内容管理</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="statistics.html" class="menu-link active">
                <span class="menu-icon">📊</span>
                <span class="menu-text">统计分析</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="settings.html" class="menu-link">
                <span class="menu-icon">⚙️</span>
                <span class="menu-text">系统设置</span>
            </a>
        </li>
        <li class="menu-item">
            <a href="notifications.html" class="menu-link">
                <span class="menu-icon">🔔</span>
                <span class="menu-text">通知管理</span>
            </a>
        </li>
    </ul>
</nav>
    
    <!-- 主内容区域 -->
    <div class="main-content">
        <div class="content-header">
            <h1 class="page-title">统计分析</h1>
            <p class="page-subtitle">人数、学时、通过率、积分统计</p>
        </div>
        
        <!-- 统计筛选 -->
        <div class="card">
            <div class="card-body">
                <div style="display: flex; gap: 15px; align-items: center; flex-wrap: wrap;">
                    <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                        <select class="form-control">
                            <option value="">全部部门</option>
                            <option value="production">生产部</option>
                            <option value="technology">技术部</option>
                            <option value="safety">安全部</option>
                            <option value="maintenance">维修部</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                        <select class="form-control">
                            <option value="">全部专业</option>
                            <option value="electrical">电气专业</option>
                            <option value="mechanical">机械专业</option>
                            <option value="safety">安全专业</option>
                            <option value="chemical">化工专业</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0; min-width: 150px;">
                        <select class="form-control">
                            <option value="month">本月</option>
                            <option value="quarter">本季度</option>
                            <option value="year">本年</option>
                            <option value="custom">自定义</option>
                        </select>
                    </div>
                    <button class="btn btn-primary">🔍 查询</button>
                    <button class="btn btn-success" onclick="exportStatistics()">📤 导出报表</button>
                </div>
            </div>
        </div>
        
        <!-- 总体统计 -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon blue">👥</div>
                <div class="stat-number">1,256</div>
                <div class="stat-label">总人数</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon green">⏱️</div>
                <div class="stat-number">15,680</div>
                <div class="stat-label">累计学时(小时)</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orange">📊</div>
                <div class="stat-number">89%</div>
                <div class="stat-label">平均通过率</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon red">⭐</div>
                <div class="stat-number">2,580</div>
                <div class="stat-label">平均积分</div>
            </div>
        </div>
        
        <!-- 部门统计 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">部门统计</h2>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>部门</th>
                                <th>人数</th>
                                <th>累计学时</th>
                                <th>平均学时</th>
                                <th>通过率</th>
                                <th>平均积分</th>
                                <th>完成率</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>生产部</strong></td>
                                <td>456人</td>
                                <td>6,840小时</td>
                                <td>15.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 92%"></div>
                                    </div>
                                    <small>92%</small>
                                </td>
                                <td>2,650分</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 88%"></div>
                                    </div>
                                    <small>88%</small>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>技术部</strong></td>
                                <td>234人</td>
                                <td>4,212小时</td>
                                <td>18.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 95%"></div>
                                    </div>
                                    <small>95%</small>
                                </td>
                                <td>2,850分</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 92%"></div>
                                    </div>
                                    <small>92%</small>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>安全部</strong></td>
                                <td>89人</td>
                                <td>1,780小时</td>
                                <td>20.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 98%"></div>
                                    </div>
                                    <small>98%</small>
                                </td>
                                <td>3,200分</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 95%"></div>
                                    </div>
                                    <small>95%</small>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>维修部</strong></td>
                                <td>345人</td>
                                <td>5,175小时</td>
                                <td>15.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 85%"></div>
                                    </div>
                                    <small>85%</small>
                                </td>
                                <td>2,450分</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 82%"></div>
                                    </div>
                                    <small>82%</small>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>外委人员</strong></td>
                                <td>132人</td>
                                <td>1,584小时</td>
                                <td>12.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 78%"></div>
                                    </div>
                                    <small>78%</small>
                                </td>
                                <td>2,100分</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 75%"></div>
                                    </div>
                                    <small>75%</small>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- 培训统计 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">培训统计</h2>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>培训名称</th>
                                <th>类型</th>
                                <th>参与人数</th>
                                <th>完成人数</th>
                                <th>完成率</th>
                                <th>平均学时</th>
                                <th>通过率</th>
                                <th>状态</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div>
                                        <strong>安全生产基础知识培训</strong>
                                        <br>
                                        <small class="text-muted">涵盖安全生产法律法规、安全管理制度等</small>
                                    </div>
                                </td>
                                <td><span class="badge badge-info">长维人员培训</span></td>
                                <td>156人</td>
                                <td>133人</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 85%"></div>
                                    </div>
                                    <small>85%</small>
                                </td>
                                <td>8.5小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 92%"></div>
                                    </div>
                                    <small>92%</small>
                                </td>
                                <td><span class="badge badge-success">进行中</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div>
                                        <strong>电气安全操作规程</strong>
                                        <br>
                                        <small class="text-muted">电气设备操作安全规范、事故预防措施</small>
                                    </div>
                                </td>
                                <td><span class="badge badge-warning">外委人员培训</span></td>
                                <td>89人</td>
                                <td>82人</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 92%"></div>
                                    </div>
                                    <small>92%</small>
                                </td>
                                <td>6.2小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 88%"></div>
                                    </div>
                                    <small>88%</small>
                                </td>
                                <td><span class="badge badge-success">进行中</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div>
                                        <strong>消防安全培训</strong>
                                        <br>
                                        <small class="text-muted">消防器材使用、火灾逃生、应急处理</small>
                                    </div>
                                </td>
                                <td><span class="badge badge-info">长维人员培训</span></td>
                                <td>234人</td>
                                <td>183人</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 78%"></div>
                                    </div>
                                    <small>78%</small>
                                </td>
                                <td>4.8小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 85%"></div>
                                    </div>
                                    <small>85%</small>
                                </td>
                                <td><span class="badge badge-success">进行中</span></td>
                            </tr>
                            <tr>
                                <td>
                                    <div>
                                        <strong>化工安全培训</strong>
                                        <br>
                                        <small class="text-muted">化工生产安全知识、危险化学品管理</small>
                                    </div>
                                </td>
                                <td><span class="badge badge-warning">外委人员培训</span></td>
                                <td>67人</td>
                                <td>67人</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 100%"></div>
                                    </div>
                                    <small>100%</small>
                                </td>
                                <td>5.0小时</td>
                                <td>
                                    <div class="progress" style="width: 100px;">
                                        <div class="progress-bar" style="width: 90%"></div>
                                    </div>
                                    <small>90%</small>
                                </td>
                                <td><span class="badge badge-info">已完成</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <!-- 积分统计 -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">积分统计</h2>
            </div>
            <div class="card-body">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon blue">⭐</div>
                        <div class="stat-number">3,245,680</div>
                        <div class="stat-label">总积分</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">📈</div>
                        <div class="stat-number">2,580</div>
                        <div class="stat-label">平均积分</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon orange">🏆</div>
                        <div class="stat-number">3,250</div>
                        <div class="stat-label">最高积分</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">📊</div>
                        <div class="stat-number">1,856</div>
                        <div class="stat-label">最低积分</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h4>积分分布</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #28a745;">456人</div>
                            <div style="color: #666; font-size: 14px;">3000分以上</div>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #667eea;">523人</div>
                            <div style="color: #666; font-size: 14px;">2500-3000分</div>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #ffc107;">234人</div>
                            <div style="color: #666; font-size: 14px;">2000-2500分</div>
                        </div>
                        <div style="padding: 20px; background: #f8f9fa; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #dc3545;">43人</div>
                            <div style="color: #666; font-size: 14px;">2000分以下</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 趋势分析 -->
        <!-- <div class="card">
            <div class="card-header">
                <h2 class="card-title">趋势分析</h2>
            </div>
            <div class="card-body">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px;">
                    <div>
                        <h4>月度学习趋势</h4>
                        <div style="height: 200px; background: #f8f9fa; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #666;">
                            📊 学习趋势图表
                        </div>
                    </div>
                    <div>
                        <h4>考试通过率趋势</h4>
                        <div style="height: 200px; background: #f8f9fa; border-radius: 10px; display: flex; align-items: center; justify-content: center; color: #666;">
                            📈 通过率趋势图表
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>

    <script>
        // 导出统计报表
        function exportStatistics() {
            if (confirm('确定要导出统计报表吗？')) {
                alert('正在生成统计报表...');
            }
        }
        
        // 角色切换功能
        function switchRole(role) {
            // 移除所有active类
            document.querySelectorAll('.role-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // 添加active类到当前按钮
            event.target.classList.add('active');
            
            // 根据角色跳转到对应页面
            if (role === 'student') {
                window.location.href = '../student/dashboard_simple.html';
            } else if (role === 'admin') {
                window.location.href = 'dashboard_simple.html';
            }
        }

        // 退出功能
        function logout() {
            if (confirm('确定要退出系统吗？')) {
                window.location.href = '../index.html';
            }
        }

        // 更新用户信息
        function updateUserInfo(username) {
            document.getElementById('currentUser').textContent = username;
        }
    </script>
</body>
</html>
